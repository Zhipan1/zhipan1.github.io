<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="./assets/js/soundcloud.js"></script>
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="./assets/css/glitch.css">
    <link href="https://fonts.googleapis.com/css?family=Megrim" rel="stylesheet">
    <link rel="stylesheet" href="http://d2v52k3cl9vedd.cloudfront.net/vhs/0.1.0/vhs.min.css">
    <link rel="shortcut icon" href="./assets/img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="./assets/img/favicon.ico" type="image/x-icon">
    <title>~ zhi pan x off white ~</title>
  </head>
  <body>
    <div class='container'>
        <div class='screen'>
            <div class='screen-content background-'>

                <div id="audio-container">
                  <img src='./assets/img/tape.png' id='audio-container-tape' />
                  <div id='audio-button' class="neon vhs-flicker no-select">audio: off</div>
                </div>

                <div class="glitch-container">
                  <a style='cursor: inherit;' href="https://twitter.com/itsmezhi" target="_blank">
                    <div class="glitch glitch--style-1" id='my-pic'>
                      <div class="glitch__img"></div>
                      <div class="glitch__img"></div>
                      <div class="glitch__img"></div>
                      <div class="glitch__img"></div>
                      <div class="glitch__img"></div>
                    </div>
                  </a>
                </div>

                <a href='https://www.instagram.com/zhipan1/' target='_blank' id='offwhite-band'>
                  <img src='./assets/img/offwhite.png' />
                </a>

                <a href='./assets/Resume.pdf' target='_blank' id='title' class='neon no-select'>zhi pan</a>
                <div id='sad-boiz' class="neon-2">> wavy hourz activated</div>
            </div>
        </div>

    </div>
    <script type="text/javascript">
      (() => {
        var currentBackground = 4
        var setNextBackground = (e, flicker) => {
          currentBackground = (currentBackground + 1) % 5
          var newBackground = 'screen-content background-' + currentBackground
          var screen = document.getElementsByClassName('screen-content')[0]
          if (flicker) {
            screen.className = newBackground + ' vhs-flicker'
            setTimeout(() => {
              screen.className = newBackground
            }, 1000)
          } else {
            screen.className = newBackground
          }
        }
        document.getElementsByClassName('screen-content')[0].addEventListener('click', setNextBackground)

        setTimeout(() => {
          document.getElementsByClassName('container')[0].className += ' tv-container'
          setTimeout(() => {
            document.getElementById('title').className += ' vhs-flicker'
          }, 2500)
          setTimeout(setNextBackground, 500)
        }, 2500)

        function create(htmlStr) {
          var frag = document.createDocumentFragment(),
          temp = document.createElement('div')
          temp.innerHTML = htmlStr
          while (temp.firstChild) {
            frag.appendChild(temp.firstChild)
          }
          return frag
        }


        if (window.innerWidth > 800) {
          var scWidget = create("<iframe id='soundcloud' src='https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/268788349'></iframe>")
          document.body.insertBefore(scWidget, document.body.childNodes[0]);
          var music = SC.Widget(document.getElementById('soundcloud'))

          var playingMusic = false
          var audioButton = document.getElementById('audio-button')
          var sad = document.getElementById('sad-boiz')
          var pic = document.getElementById('my-pic')
          var toggleMusic = (e) => {
            e.stopPropagation()
            if (playingMusic) {
              music.pause()
              audioButton.innerHTML = 'audio: off'
              sad.className = 'neon-2'
              pic.className = 'glitch glitch--style-1'
            } else {
              music.play()
              audioButton.innerHTML = 'audio: on'
              setTimeout(() => {
                sad.className = 'neon-2 vhs-flicker'
              }, 100)
              setTimeout(() => {
                pic.className = 'glitch glitch--style-1 active'
              }, 17200)
            }
            playingMusic = !playingMusic
          }

          audioButton.addEventListener('click', toggleMusic)
        }

        Array.from(document.getElementsByTagName('a')).map((el) => el.addEventListener('click', e => e.stopPropagation()))
      })()
    </script>
  </body>
</html>
